import{c as f,u as w,r as b,j as e,T as C,P,n as M,d as T,a as S,C as E,b as B,A as D,p as R,e as A,f as _,L as z,B as F,g as L,h as $,i as q,k as I,l as O,F as H,m as U,R as W}from"./index.js";/**
 * @license lucide-react v0.547.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],J=f("coffee",V);/**
 * @license lucide-react v0.547.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Z=f("external-link",K);/**
 * @license lucide-react v0.547.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],Q=f("pause",G);/**
 * @license lucide-react v0.547.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],y=f("play",X);/**
 * @license lucide-react v0.547.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],N=f("square",Y);function ee(){const{blacklist:o,addToBlacklist:l,removeFromBlacklist:c,error:m,setError:a}=w(t=>({blacklist:t.blacklist,addToBlacklist:t.addToBlacklist,removeFromBlacklist:t.removeFromBlacklist,error:t.error,setError:t.setError})),[h,x]=b.useState(""),u=b.useRef(!1),s=b.useRef(null);b.useEffect(()=>()=>{s.current&&clearTimeout(s.current)},[]);function r(){s.current&&clearTimeout(s.current),s.current=setTimeout(()=>a(null),2500)}async function n(){const t=h.trim(),d=M(t);if(!d){a("Informe um domínio válido, por ex.: exemplo.com"),r();return}if(o?.includes(d)){a(`"${d}" já está na lista.`),r(),x("");return}if(!u.current){u.current=!0;try{T("[dbg] BlacklistManager.handleAdd -> normalized:",d),await l?.(d),x("")}catch{a("Falha ao adicionar. Tente novamente."),r()}finally{u.current=!1}}}async function g(t){if(!u.current){u.current=!0;try{await c?.(t)}catch{a("Falha ao remover. Tente novamente."),r()}finally{u.current=!1}}}return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"glass-card p-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Sites bloqueados"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Adicione ou remova domínios que serão bloqueados."})]}),e.jsxs("div",{className:"glass-card p-4",children:[e.jsx("div",{className:"space-y-2 mb-3",children:!o||o.length===0?e.jsx("div",{className:"text-center py-6 text-gray-500",children:"Nenhum site bloqueado ainda."}):o.map(t=>{const d=typeof t=="string"?t:t&&typeof t=="object"&&"domain"in t?String(t.domain):String(t);return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg border border-white/10",children:[e.jsx("span",{className:"text-white font-mono text-sm",children:d}),e.jsx("button",{onClick:()=>g(d),className:"p-2 text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-lg transition-colors","aria-label":`Remover ${d}`,children:e.jsx(C,{className:"w-4 h-4"})})]},d)})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"exemplo.com",value:h,onChange:t=>x(t.target.value),onKeyDown:t=>t.key==="Enter"&&n(),className:"flex-1 px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-blue-500/50","aria-label":"Novo domínio"}),e.jsxs("button",{onClick:n,disabled:u.current,className:"px-4 py-3 bg-blue-500 hover:bg-blue-600 disabled:opacity-60 text-white rounded-lg transition-colors flex items-center gap-2 font-medium",children:[e.jsx(P,{className:"w-5 h-5"}),"Adicionar"]})]}),m&&e.jsx("p",{id:"blacklist-error",className:"text-xs text-red-400 mt-2",role:"alert","aria-live":"polite",children:m})]}),e.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3",children:e.jsx("p",{className:"text-xs text-blue-300",children:"💡 Sites bloqueados não carregam durante o uso normal e também em sessões de foco."})})]})}function te(o){const l=Math.max(0,o|0),c=Math.floor(l/60),m=l%60;return`${c.toString().padStart(2,"0")}:${m.toString().padStart(2,"0")}`}function v(){const{pomodoro:o,startPomodoro:l,stopPomodoro:c,pausePomodoro:m,resumePomodoro:a,startBreak:h}=S(i=>({pomodoro:i.pomodoro,startPomodoro:i.startPomodoro,stopPomodoro:i.stopPomodoro,pausePomodoro:i.pausePomodoro,resumePomodoro:i.resumePomodoro,startBreak:i.startBreak})),[x,u]=b.useState(o.config.focusMinutes||25),[s,r]=b.useState(o.config.shortBreakMinutes||5),n=o.state.phase,g=o.state.isPaused,t=Math.ceil((o.state.remainingMs??0)/1e3),d=`Ciclo ${o.state.cycleIndex+1} de ${o.config.cyclesBeforeLongBreak}`,j=()=>{l(x,s)},p=()=>{if(n==="idle")return e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-lg p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Tempo de Foco (minutos)"}),e.jsx("input",{type:"number",value:x,onChange:i=>u(Number(i.target.value)),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white focus:outline-none focus:border-blue-500/50",min:1,max:120,inputMode:"numeric"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Tempo de Pausa (minutos)"}),e.jsx("input",{type:"number",value:s,onChange:i=>r(Number(i.target.value)),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white focus:outline-none focus:border-blue-500/50",min:1,max:60,inputMode:"numeric"})]}),e.jsxs("button",{onClick:j,className:"w-full bg-blue-500 hover:bg-blue-600 text-white py-3 rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:[e.jsx(y,{className:"w-5 h-5"}),"Iniciar Pomodoro"]})]});if(n==="focus_complete"){const i=o.state.pendingBreakType==="long"?"Longa":"Curta";return e.jsxs("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-4 space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl mb-2",children:"🎯"}),e.jsx("p",{className:"text-green-400 font-medium",children:"Foco Completo!"}),e.jsx("p",{className:"text-sm text-gray-300",children:"Pronto para o descanso?"})]}),e.jsxs("button",{onClick:h,className:"w-full bg-green-500 hover:bg-green-600 text-white py-3 rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:[e.jsx(J,{className:"w-5 h-5"}),"Iniciar Pausa ",i]})]})}return g?e.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4 space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl mb-2",children:"⏸️"}),e.jsx("p",{className:"text-yellow-400 font-medium",children:"Pomodoro Pausado"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:a,className:"flex-1 bg-blue-500 hover:bg-blue-600 text-white py-3 rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:[e.jsx(y,{className:"w-5 h-5"}),"Retomar"]}),e.jsxs("button",{onClick:c,className:"flex-1 bg-red-500 hover:bg-red-600 text-white py-3 rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:[e.jsx(N,{className:"w-5 h-5"}),"Parar"]})]})]}):e.jsx("div",{className:"bg-white/5 border border-white/10 rounded-lg p-4 space-y-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:m,className:"flex-1 bg-yellow-500 hover:bg-yellow-600 text-white py-3 rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:[e.jsx(Q,{className:"w-5 h-5"}),"Pausar"]}),e.jsxs("button",{onClick:c,className:"flex-1 bg-red-500 hover:bg-red-600 text-white py-3 rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:[e.jsx(N,{className:"w-5 h-5"}),"Parar"]})]})})};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-lg p-6 text-center",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-400 mb-2",children:[n==="idle"&&"Pronto para começar",n==="focus"&&"🎯 Modo Foco",n==="short_break"&&"☕ Pausa Curta",n==="long_break"&&"☕ Pausa Longa",n==="focus_complete"&&"🎯 Foco Completo",g&&" (Pausado)"]}),n!=="idle"&&n!=="focus_complete"&&e.jsx("div",{className:"text-4xl font-bold text-blue-400 mb-4",children:te(t)}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-500",children:[e.jsx(E,{className:"w-4 h-4"}),e.jsx("span",{children:d})]})]}),p(),e.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs font-medium text-blue-300 mb-2",children:"Como funciona:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs text-blue-200",children:[e.jsx("li",{children:"Durante o foco, sites da blacklist são bloqueados"}),e.jsx("li",{children:"Após 4 ciclos, você ganha uma pausa longa"}),e.jsx("li",{children:"Modo adaptativo aumenta o tempo de foco gradualmente"})]})]})]})}B.register(D,R,A,_,z,F,L,$,q);function oe(){const o=w(p=>p.dailyUsage??{}),l=new Date().toISOString().split("T")[0],m=o?.[l]&&o[l].perDomain||{},a=Object.entries(m).sort(([,p],[,i])=>(Number(i)||0)-(Number(p)||0)).slice(0,5),h=Object.values(m).reduce((p,i)=>p+(Number(i)||0),0),x=Math.floor(h/60),u=Math.floor(x/60),s=x%60,r=a.map(([p])=>p),n=a.map(([,p])=>Math.floor(p/60)),g={labels:r,datasets:[{data:n,backgroundColor:["rgba(59, 130, 246, 0.7)","rgba(16, 185, 129, 0.7)","rgba(239, 68, 68, 0.7)","rgba(245, 158, 11, 0.7)","rgba(139, 92, 246, 0.7)"],borderColor:"#0d0d1a",borderWidth:2}]},t={labels:r,datasets:[{label:"Minutos",data:n,backgroundColor:"rgba(59, 130, 246, 0.6)",borderColor:"rgba(59, 130, 246, 1)",borderWidth:1,borderRadius:4}]},d={maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"#1f2937",titleColor:"#e5e7eb",bodyColor:"#d1d5db",padding:10,cornerRadius:4}}},j={maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"#1f2937",titleColor:"#e5e7eb",bodyColor:"#d1d5db",padding:10,cornerRadius:4}},scales:{x:{ticks:{color:"#9ca3af"},grid:{color:"rgba(255, 255, 255, 0.05)"}},y:{beginAtZero:!0,ticks:{color:"#9ca3af"},grid:{color:"rgba(255, 255, 255, 0.1)"}}}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-lg p-4 text-center",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-1",children:"USO TOTAL HOJE"}),e.jsxs("div",{className:"text-3xl font-bold text-blue-400",children:[u,"h ",s,"m"]})]}),a.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-white mb-3",children:"Distribuição de Hoje"}),e.jsx("div",{className:"h-40 flex items-center justify-center",children:e.jsx(I,{data:g,options:d})})]}),e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-white mb-3",children:"Top Sites (Minutos)"}),e.jsx("div",{className:"h-40",children:e.jsx(O,{data:t,options:j})})]})]}):e.jsx("div",{className:"bg-white/5 border border-white/10 rounded-lg p-8 text-center",children:e.jsx("p",{className:"text-gray-500 text-sm",children:"Nenhum dado de uso para hoje ainda."})})]})}const k={compact:{width:420,height:340,timerSize:"text-6xl",spacing:{indicator:"mb-5",timer:"mb-7",button:""}},medium:{width:480,height:380,timerSize:"text-7xl",spacing:{indicator:"mb-6",timer:"mb-8",button:""}},large:{width:560,height:440,timerSize:"text-8xl",spacing:{indicator:"mb-8",timer:"mb-10",button:""}}};function se(){const[o,l]=b.useState(null),[c,m]=b.useState({width:1920,height:1080,windowWidth:1920,windowHeight:1080});b.useEffect(()=>{const r=()=>{m({width:window.screen.width,height:window.screen.height,windowWidth:window.outerWidth,windowHeight:window.outerHeight})};return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]);const a=b.useMemo(()=>{const r=c.width*c.height;return r>3e6?"large":r>2e6?"medium":(r>1e6,"compact")},[c.width,c.height]),h=o||a;return{dimensions:k[h],currentSize:h,isManual:o!==null,setSize:r=>{l(r)},resetToAuto:()=>{l(null)},availableSizes:Object.keys(k)}}function re(){const{isLoading:o,error:l,setError:c,pomodoro:m}=w(s=>({isLoading:s.isLoading,error:s.error,setError:s.setError,pomodoro:s.pomodoro})),[a,h]=b.useState("pomodoro"),{dimensions:x}=se();b.useEffect(()=>{const s=S.getState();s.loadState();const r=s.listenForUpdates();return()=>{try{r?.()}catch{}}},[]);const u=()=>{try{typeof chrome<"u"&&(chrome?.runtime?.openOptionsPage?chrome.runtime.openOptionsPage():chrome?.tabs?.create&&chrome?.runtime?.getURL&&chrome.tabs.create({url:chrome.runtime.getURL("options.html")}))}catch(s){console.warn("[v0] Failed to open options page:",s)}};return o?e.jsx("div",{className:"flex items-center justify-center h-full min-h-[500px] bg-[#0d0d1a]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-400 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-400 text-sm",children:"Carregando..."})]})}):m?.state?.phase&&m.state.phase!=="idle"?e.jsx("div",{className:"pomodoro-fullscreen-container",style:{"--popup-width":`${x.width}px`,"--popup-height":`${x.height}px`},children:e.jsx(v,{})}):e.jsx("div",{className:"popup-main-container w-full h-full bg-[#0d0d1a] p-2",style:{"--popup-width":"380px","--popup-min-height":"520px"},children:e.jsxs("div",{className:"glass-card h-full flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-white/10 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1.5 bg-gradient-to-br from-blue-500 to-purple-600 rounded-md",children:e.jsx(H,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-md font-bold text-white",children:"Focus Extension"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Acesso Rápido"})]})]}),e.jsx("button",{onClick:u,className:"p-2 bg-white/5 hover:bg-white/10 text-gray-300 rounded-lg transition-colors",title:"Abrir painel completo",children:e.jsx(Z,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex border-b border-white/10 flex-shrink-0",children:[e.jsx("button",{onClick:()=>h("pomodoro"),className:`flex-1 py-2.5 px-2 text-xs font-semibold transition-colors ${a==="pomodoro"?"border-b-2 border-blue-400 text-white bg-blue-500/10":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:"Pomodoro"}),e.jsx("button",{onClick:()=>h("blacklist"),className:`flex-1 py-2.5 px-2 text-xs font-semibold transition-colors ${a==="blacklist"?"border-b-2 border-blue-400 text-white bg-blue-500/10":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:"Bloqueio"}),e.jsx("button",{onClick:()=>h("dashboard"),className:`flex-1 py-2.5 px-2 text-xs font-semibold transition-colors ${a==="dashboard"?"border-b-2 border-blue-400 text-white bg-blue-500/10":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:"Dashboard"})]}),e.jsxs("div",{className:"p-4 flex-1 overflow-y-auto",children:[l&&e.jsxs("div",{className:"mb-4 p-3 bg-red-500/20 border border-red-500/30 text-red-300 text-xs rounded-md flex justify-between items-center",children:[e.jsx("span",{children:l}),e.jsx("button",{onClick:()=>c(null),className:"text-red-300 hover:text-red-100 text-lg","aria-label":"Fechar alerta de erro",children:"×"})]}),a==="pomodoro"&&e.jsx(v,{}),a==="blacklist"&&e.jsx(ee,{}),a==="dashboard"&&e.jsx(oe,{})]})]})})}U.createRoot(document.getElementById("root")).render(e.jsx(W.StrictMode,{children:e.jsx(re,{})}));
