import{c as j,R as v,u as g,r as u,j as e,T as k,P as C,n as M,C as S,a as T,A as E,p as P,b as O,d as D,L as R,B as F,e as I,f as L,g as q,h as A,i as B,F as _,k as $}from"./index.js";/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=j("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=j("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=j("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),y=t=>Symbol.iterator in t,w=t=>"entries"in t,N=(t,r)=>{const i=t instanceof Map?t:new Map(t.entries()),o=r instanceof Map?r:new Map(r.entries());if(i.size!==o.size)return!1;for(const[a,n]of i)if(!o.has(a)||!Object.is(n,o.get(a)))return!1;return!0},W=(t,r)=>{const i=t[Symbol.iterator](),o=r[Symbol.iterator]();let a=i.next(),n=o.next();for(;!a.done&&!n.done;){if(!Object.is(a.value,n.value))return!1;a=i.next(),n=o.next()}return!!a.done&&!!n.done};function J(t,r){return Object.is(t,r)?!0:typeof t!="object"||t===null||typeof r!="object"||r===null||Object.getPrototypeOf(t)!==Object.getPrototypeOf(r)?!1:y(t)&&y(r)?w(t)&&w(r)?N(t,r):W(t,r):N({entries:()=>Object.entries(t)},{entries:()=>Object.entries(r)})}function K(t){const r=v.useRef(void 0);return i=>{const o=t(i);return J(r.current,o)?r.current:r.current=o}}function V(){const{blacklist:t,addToBlacklist:r,removeFromBlacklist:i,error:o,setError:a}=g(K(s=>({blacklist:s.blacklist,addToBlacklist:s.addToBlacklist,removeFromBlacklist:s.removeFromBlacklist,error:s.error,setError:s.setError}))),[n,d]=u.useState(""),c=u.useRef(!1);function l(){window.clearTimeout(l.__t),l.__t=window.setTimeout(()=>a(null),2500)}async function b(){const s=n.trim(),m=M(s);if(!m){a("Informe um domÃ­nio vÃ¡lido, por ex.: exemplo.com"),l();return}if(t?.includes(m)){a(`"${m}" jÃ¡ estÃ¡ na lista.`),l(),d("");return}if(!c.current){c.current=!0;try{await r?.(m),d("")}catch{a("Falha ao adicionar. Tente novamente."),l()}finally{c.current=!1}}}async function p(s){if(!c.current){c.current=!0;try{await i?.(s)}catch{a("Falha ao remover. Tente novamente."),l()}finally{c.current=!1}}}return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"glass-card p-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Sites bloqueados"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Adicione ou remova domÃ­nios que serÃ£o bloqueados."})]}),e.jsxs("div",{className:"glass-card p-4",children:[e.jsx("div",{className:"space-y-2 mb-3",children:!t||t.length===0?e.jsx("div",{className:"text-center py-6 text-gray-500",children:"Nenhum site bloqueado ainda."}):t.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg border border-white/10",children:[e.jsx("span",{className:"text-white font-mono text-sm",children:s}),e.jsx("button",{onClick:()=>p(s),className:"p-2 text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-lg transition-colors","aria-label":`Remover ${s}`,children:e.jsx(k,{className:"w-4 h-4"})})]},s))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"exemplo.com",value:n,onChange:s=>d(s.target.value),onKeyDown:s=>s.key==="Enter"&&b(),className:"flex-1 px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-blue-500/50","aria-label":"Novo domÃ­nio"}),e.jsxs("button",{onClick:b,disabled:c.current,className:"px-4 py-3 bg-blue-500 hover:bg-blue-600 disabled:opacity-60 text-white rounded-lg transition-colors flex items-center gap-2 font-medium",children:[e.jsx(C,{className:"w-5 h-5"}),"Adicionar"]})]}),o&&e.jsx("p",{id:"blacklist-error",className:"text-xs text-red-400 mt-2",role:"alert","aria-live":"polite",children:o})]}),e.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3",children:e.jsx("p",{className:"text-xs text-blue-300",children:"ðŸ’¡ Sites bloqueados nÃ£o carregam durante o uso normal e tambÃ©m em sessÃµes de foco."})})]})}function Z(){const{pomodoro:t,startPomodoro:r,stopPomodoro:i}=g(),[o,a]=u.useState(t.config.focusMinutes||25),[n,d]=u.useState(t.config.shortBreakMinutes||5),[c,l]=u.useState(Math.ceil((t.state.remainingMs??0)/1e3));u.useEffect(()=>{if(t.state.phase==="idle"){l(o*60);return}if(!t.state.startedAt){l(Math.ceil((t.state.remainingMs??0)/1e3));return}const s=setInterval(()=>{const m=new Date(t.state.startedAt).getTime(),h=(Date.now()-m)/1e3,x=Math.max(0,Math.ceil((t.state.remainingMs??0)/1e3)-h);l(x),x<=0&&clearInterval(s)},250);return()=>clearInterval(s)},[t.state.phase,t.state.startedAt,t.state.remainingMs,o]);const b=()=>{r(o,n)},p=s=>{const m=Math.floor(s/60),h=Math.floor(s%60);return`${m.toString().padStart(2,"0")}:${h.toString().padStart(2,"0")}`};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-lg p-6 text-center",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-400 mb-2",children:[t.state.phase==="idle"&&"Pronto para comeÃ§ar",t.state.phase==="focus"&&"ðŸŽ¯ Modo Foco",(t.state.phase==="short_break"||t.state.phase==="long_break")&&"â˜• Pausa"]}),e.jsx("div",{className:`text-4xl font-bold mb-4 ${t.state.phase!=="idle"?"text-blue-400":"text-gray-600"}`,children:p(c)}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-500",children:[e.jsx(S,{className:"w-4 h-4"}),e.jsxs("span",{children:["Ciclo ",t.state.cycleIndex," de ",t.config.cyclesBeforeLongBreak]})]})]}),t.state.phase==="idle"?e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-lg p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Tempo de Foco (minutos)"}),e.jsx("input",{type:"number",value:o,onChange:s=>a(Number(s.target.value)),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white focus:outline-none focus:border-blue-500/50",min:"1",max:"120"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Tempo de Pausa (minutos)"}),e.jsx("input",{type:"number",value:n,onChange:s=>d(Number(s.target.value)),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white focus:outline-none focus:border-blue-500/50",min:"1",max:"60"})]}),e.jsxs("button",{onClick:b,className:"w-full bg-blue-500 hover:bg-blue-600 text-white py-3 rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:[e.jsx(z,{className:"w-5 h-5"}),"Iniciar Pomodoro"]})]}):e.jsxs("button",{onClick:i,className:"w-full bg-red-500 hover:bg-red-600 text-white py-3 rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:[e.jsx(H,{className:"w-5 h-5"}),"Parar Pomodoro"]}),e.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs font-medium text-blue-300 mb-2",children:"Como funciona:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs text-blue-200",children:[e.jsx("li",{children:"Durante o foco, sites da blacklist sÃ£o bloqueados"}),e.jsx("li",{children:"ApÃ³s 4 ciclos, vocÃª ganha uma pausa longa"}),e.jsx("li",{children:"Modo adaptativo aumenta o tempo de foco gradualmente"})]})]})]})}T.register(E,P,O,D,R,F,I,L,q);function G(){const{dailyUsage:t}=g(),r=new Date().toISOString().split("T")[0],i=t[r]||{},o=Object.entries(i).sort(([,x],[,f])=>f-x).slice(0,5),a=Object.values(i).reduce((x,f)=>x+f,0),n=Math.floor(a/60),d=Math.floor(n/60),c=n%60,l=o.map(([x])=>x),b=o.map(([,x])=>Math.floor(x/60)),p={labels:l,datasets:[{data:b,backgroundColor:["rgba(59, 130, 246, 0.7)","rgba(16, 185, 129, 0.7)","rgba(239, 68, 68, 0.7)","rgba(245, 158, 11, 0.7)","rgba(139, 92, 246, 0.7)"],borderColor:"#0d0d1a",borderWidth:2}]},s={labels:l,datasets:[{label:"Minutos",data:b,backgroundColor:"rgba(59, 130, 246, 0.6)",borderColor:"rgba(59, 130, 246, 1)",borderWidth:1,borderRadius:4}]},m={maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"#1f2937",titleColor:"#e5e7eb",bodyColor:"#d1d5db",padding:10,cornerRadius:4}}},h={maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"#1f2937",titleColor:"#e5e7eb",bodyColor:"#d1d5db",padding:10,cornerRadius:4}},scales:{x:{ticks:{color:"#9ca3af"},grid:{color:"rgba(255, 255, 255, 0.05)"}},y:{beginAtZero:!0,ticks:{color:"#9ca3af"},grid:{color:"rgba(255, 255, 255, 0.1)"}}}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-lg p-4 text-center",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-1",children:"USO TOTAL HOJE"}),e.jsxs("div",{className:"text-3xl font-bold text-blue-400",children:[d,"h ",c,"m"]})]}),o.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-white mb-3",children:"DistribuiÃ§Ã£o de Hoje"}),e.jsx("div",{className:"h-40 flex items-center justify-center",children:e.jsx(A,{data:p,options:m})})]}),e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-white mb-3",children:"Top Sites (Minutos)"}),e.jsx("div",{className:"h-40",children:e.jsx(B,{data:s,options:h})})]})]}):e.jsx("div",{className:"bg-white/5 border border-white/10 rounded-lg p-8 text-center",children:e.jsx("p",{className:"text-gray-500 text-sm",children:"Nenhum dado de uso para hoje ainda."})})]})}function Q(){const{isLoading:t,error:r,setError:i}=g(),[o,a]=u.useState("pomodoro");u.useEffect(()=>{const d=g.getState();d.loadState();const c=d.listenForUpdates();return()=>{try{c?.()}catch{}}},[]);const n=()=>{try{typeof chrome<"u"&&(chrome?.runtime?.openOptionsPage?chrome.runtime.openOptionsPage():chrome?.tabs?.create&&chrome?.runtime?.getURL&&chrome.tabs.create({url:chrome.runtime.getURL("options.html")}))}catch(d){console.warn("[v0] Failed to open options page:",d)}};return t?e.jsx("div",{className:"flex items-center justify-center h-full min-h-[500px] bg-[#0d0d1a]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-400 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-400 text-sm",children:"Carregando..."})]})}):e.jsx("div",{className:"w-full h-full min-h-[500px] bg-[#0d0d1a] p-2",children:e.jsxs("div",{className:"glass-card h-full flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-white/10 flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1.5 bg-gradient-to-br from-blue-500 to-purple-600 rounded-md",children:e.jsx(_,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-md font-bold text-white",children:"Focus Extension"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Acesso RÃ¡pido"})]})]}),e.jsx("button",{onClick:n,className:"p-2 bg-white/5 hover:bg-white/10 text-gray-300 rounded-lg transition-colors",title:"Abrir painel completo",children:e.jsx(U,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex border-b border-white/10 flex-shrink-0",children:[e.jsx("button",{onClick:()=>a("pomodoro"),className:`flex-1 py-2.5 px-2 text-xs font-semibold transition-colors ${o==="pomodoro"?"border-b-2 border-blue-400 text-white bg-blue-500/10":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:"Pomodoro"}),e.jsx("button",{onClick:()=>a("blacklist"),className:`flex-1 py-2.5 px-2 text-xs font-semibold transition-colors ${o==="blacklist"?"border-b-2 border-blue-400 text-white bg-blue-500/10":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:"Bloqueio"}),e.jsx("button",{onClick:()=>a("dashboard"),className:`flex-1 py-2.5 px-2 text-xs font-semibold transition-colors ${o==="dashboard"?"border-b-2 border-blue-400 text-white bg-blue-500/10":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:"Dashboard"})]}),e.jsxs("div",{className:"p-4 flex-1 overflow-y-auto",children:[r&&e.jsxs("div",{className:"mb-4 p-3 bg-red-500/20 border border-red-500/30 text-red-300 text-xs rounded-md flex justify-between items-center",children:[e.jsx("span",{children:r}),e.jsx("button",{onClick:()=>i(null),className:"text-red-300 hover:text-red-100 text-lg","aria-label":"Fechar alerta de erro",children:"Ã—"})]}),o==="pomodoro"&&e.jsx(Z,{}),o==="blacklist"&&e.jsx(V,{}),o==="dashboard"&&e.jsx(G,{})]})]})})}$.createRoot(document.getElementById("root")).render(e.jsx(v.StrictMode,{children:e.jsx(Q,{})}));
